# é…ç½®æ–‡ä»¶å’Œè„šæœ¬è¯´æ˜

## ğŸ“‹ é…ç½®æ–‡ä»¶ï¼ˆ.env ç³»åˆ—ï¼‰

### æ ¸å¿ƒé…ç½®æ–‡ä»¶
| æ–‡ä»¶ | ç”¨é€” | è¯´æ˜ |
|------|------|------|
| `.env.example` | é…ç½®æ¨¡æ¿ | ç¤ºä¾‹é…ç½®ï¼Œä¸è¦ç›´æ¥ç”¨ |
| `.env.prod` | ç”Ÿäº§ç¯å¢ƒæ¨¡æ¿ | openGauss æ•°æ®åº“é…ç½® |
| `.env.docker` | Docker éƒ¨ç½²æ¨¡æ¿ | Docker ä¸“ç”¨é…ç½® |
| **`.env`** | **å®é™…ä½¿ç”¨çš„é…ç½®** | **å¤åˆ¶ä¸Šé¢ä»»æ„ä¸€ä¸ªæ”¹åä¸º .env** |

### ä½¿ç”¨æ–¹å¼
```bash
# å¼€å‘ç¯å¢ƒï¼ˆSQLiteï¼‰
cp .env.example .env

# ç”Ÿäº§ç¯å¢ƒï¼ˆopenGaussï¼‰
cp .env.prod .env

# Docker éƒ¨ç½²
cp .env.docker .env
```

**åªéœ€è¦ä¸€ä¸ª `.env` æ–‡ä»¶ï¼** å…¶ä»–éƒ½æ˜¯æ¨¡æ¿ã€‚

---

## ğŸš€ éƒ¨ç½²æ–¹å¼å¯¹æ¯”

### æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ JARï¼ˆæ¨èï¼Œå¿«é€Ÿï¼‰âš¡

**ä¼˜ç‚¹ï¼š**
- å¯åŠ¨å¿«ï¼ˆå‡ ç§’é’Ÿï¼‰
- ç®€å•ç›´æ¥
- èµ„æºå ç”¨å°‘

**æ­¥éª¤ï¼š**
```bash
# 1. æœ¬åœ°æ„å»º JAR åŒ…ï¼ˆWindowsï¼‰
./mvnw.cmd clean package -DskipTests

# 2. ä¸Šä¼  JAR åˆ°æœåŠ¡å™¨
scp target/car-sales-system-1.0.0.jar user@server:~/car-sales/backend/

# 3. æœåŠ¡å™¨ä¸Šé…ç½®ç¯å¢ƒ
cd ~/car-sales/backend
cp .env.example .env

# 4. å¯åŠ¨
chmod +x start.sh
./start.sh

# 5. æŸ¥çœ‹æ—¥å¿—
tail -f logs/app.log

# 6. åœæ­¢
./stop.sh
```

---

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²ï¼ˆæ ‡å‡†åŒ–ï¼‰ğŸ³

**ä¼˜ç‚¹ï¼š**
- ç¯å¢ƒéš”ç¦»
- æ˜“äºè¿ç§»
- ç»Ÿä¸€ç®¡ç†

**ç¼ºç‚¹ï¼š**
- ç¬¬ä¸€æ¬¡æ„å»ºæ…¢ï¼ˆ10-20åˆ†é’Ÿï¼‰
- éœ€è¦å®‰è£… Docker

**æ­¥éª¤ï¼š**
```bash
# 1. ä¸Šä¼ æ•´ä¸ª backend ç›®å½•åˆ°æœåŠ¡å™¨

# 2. é…ç½®ç¯å¢ƒ
cd ~/car-sales/backend
cp .env.docker .env

# 3. ä¸€é”®éƒ¨ç½²
chmod +x deploy.sh
./deploy.sh

# 4. ç®¡ç†
docker-compose logs -f    # æŸ¥çœ‹æ—¥å¿—
docker-compose restart    # é‡å¯
docker-compose stop       # åœæ­¢
```

---

## ğŸ“œ è„šæœ¬æ–‡ä»¶è¯´æ˜

### æœ¬åœ°ä½¿ç”¨ï¼ˆWindowsï¼‰
| è„šæœ¬ | ç”¨é€” |
|------|------|
| `mvnw.cmd` | Maven åŒ…è£…å™¨ï¼Œç”¨äºæ„å»º |
| `build.sh` | æ„å»º JAR åŒ… |
| `run-app.cmd` | æœ¬åœ°è¿è¡Œï¼ˆWindowsï¼‰ |
| `start-dev.cmd` | å¼€å‘ç¯å¢ƒå¯åŠ¨ï¼ˆWindowsï¼‰ |
| `start-prod.cmd` | ç”Ÿäº§ç¯å¢ƒå¯åŠ¨ï¼ˆWindowsï¼‰ |

### æœåŠ¡å™¨ä½¿ç”¨ï¼ˆLinuxï¼‰
| è„šæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|
| **`start.sh`** | **å¯åŠ¨åº”ç”¨** | **JAR æ–¹å¼éƒ¨ç½²ç”¨è¿™ä¸ª** |
| **`stop.sh`** | **åœæ­¢åº”ç”¨** | æ€æ‰è¿›ç¨‹ |
| `restart.sh` | é‡å¯åº”ç”¨ | å…ˆåœåå¯ |
| `deploy.sh` | Docker éƒ¨ç½² | Docker æ–¹å¼ç”¨è¿™ä¸ª |

### Docker ç›¸å…³
| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `Dockerfile` | Docker é•œåƒå®šä¹‰ |
| `docker-compose.yml` | Docker ç¼–æ’é…ç½® |
| `.dockerignore` | Docker æ„å»ºå¿½ç•¥æ–‡ä»¶ |

---

## ğŸ¯ æ¨èæ–¹æ¡ˆï¼šç›´æ¥è¿è¡Œ JAR

**ä½ çš„æƒ…å†µæœ€é€‚åˆè¿™ä¸ªï¼** å› ä¸ºï¼š
1. ä½ æœ¬åœ°å·²ç»èƒ½è·‘äº†
2. åªéœ€è¦ä¸Šä¼  jar åŒ…
3. å¯åŠ¨å¿«ï¼Œå‡ ç§’é’Ÿæå®š

### å®Œæ•´æµç¨‹

#### åœ¨æœ¬åœ°ï¼ˆWindowsï¼‰
```bash
# æ„å»º JAR åŒ…
./mvnw.cmd clean package -DskipTests

# æ‰¾åˆ° JAR åŒ…
# ä½ç½®ï¼štarget/car-sales-system-1.0.0.jar
```

#### ä¸Šä¼ åˆ°æœåŠ¡å™¨
```bash
# ä½¿ç”¨ scpï¼ˆæ›¿æ¢ user å’Œ serverï¼‰
scp target/car-sales-system-1.0.0.jar user@your-server:~/car-sales/backend/

# æˆ–è€…ç”¨ FileZilla ç­‰å·¥å…·ä¸Šä¼ 
```

#### åœ¨æœåŠ¡å™¨ä¸Š
```bash
# 1. è¿›å…¥ç›®å½•
cd ~/car-sales/backend

# 2. é…ç½®ç¯å¢ƒï¼ˆSQLite æ¨¡å¼ï¼‰
cp .env.example .env

# 3. å¯åŠ¨
chmod +x start.sh stop.sh
./start.sh

# 4. æŸ¥çœ‹æ—¥å¿—
tail -f logs/app.log

# çœ‹åˆ° "Started CarSalesSystemApplication" å°±æˆåŠŸäº†ï¼
```

#### æµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# å¦‚æœè¿”å› {"status":"UP",...} å°±æˆåŠŸäº†
```

---

## ğŸ”„ æ—¥å¸¸ç»´æŠ¤

### æ›´æ–°åº”ç”¨
```bash
# 1. æœ¬åœ°é‡æ–°æ„å»º jar
./mvnw.cmd clean package -DskipTests

# 2. ä¸Šä¼ æ–° jar åˆ°æœåŠ¡å™¨

# 3. é‡å¯
./restart.sh
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æ—¥å¿—
tail -f logs/app.log

# æœ€è¿‘ 100 è¡Œ
tail -n 100 logs/app.log

# æœç´¢é”™è¯¯
grep ERROR logs/app.log
```

### åœæ­¢åº”ç”¨
```bash
./stop.sh
```

---

## ğŸ†š ä¸¤ç§æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | JAR ç›´æ¥è¿è¡Œ | Docker éƒ¨ç½² |
|------|-------------|------------|
| å¯åŠ¨é€Ÿåº¦ | âš¡ å¿«ï¼ˆ5ç§’ï¼‰ | ğŸŒ æ…¢ï¼ˆé¦–æ¬¡10åˆ†é’Ÿï¼‰ |
| èµ„æºå ç”¨ | ğŸ’š ä½ | ğŸ’› ä¸­ç­‰ |
| ç¯å¢ƒä¾èµ– | éœ€è¦ JDK 17 | åªéœ€è¦ Docker |
| æ›´æ–°æ–¹å¼ | ä¸Šä¼  jar + é‡å¯ | é‡æ–°æ„å»ºé•œåƒ |
| é€‚ç”¨åœºæ™¯ | å¿«é€Ÿéƒ¨ç½²ã€æµ‹è¯• | ç”Ÿäº§ç¯å¢ƒã€å¤šå®ä¾‹ |
| æ¨èåº¦ | â­â­â­â­â­ | â­â­â­ |

---

## â“ å¸¸è§é—®é¢˜

### Q: æˆ‘è¯¥ç”¨å“ªä¸ª .env æ–‡ä»¶ï¼Ÿ
**A:** åªéœ€è¦ä¸€ä¸ª `.env`ï¼Œä»æ¨¡æ¿å¤åˆ¶ï¼š
- å¼€å‘/æµ‹è¯•ï¼š`cp .env.example .env`
- ç”Ÿäº§ï¼š`cp .env.prod .env`

### Q: Docker ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼Ÿ
**A:** ç¬¬ä¸€æ¬¡è¦ä¸‹è½½åŸºç¡€é•œåƒã€Maven ä¾èµ–ã€ç¼–è¯‘ä»£ç ã€‚åç»­æ›´æ–°ä¼šå¿«å¾ˆå¤šã€‚

### Q: æˆ‘è¯¥ç”¨ JAR è¿˜æ˜¯ Dockerï¼Ÿ
**A:** 
- å¿«é€Ÿæµ‹è¯• â†’ JAR
- æ­£å¼ç”Ÿäº§ â†’ çœ‹æƒ…å†µï¼ŒJAR ä¹Ÿå®Œå…¨å¤Ÿç”¨
- å¤šç¯å¢ƒéƒ¨ç½² â†’ Docker

### Q: æœåŠ¡å™¨éœ€è¦å®‰è£…ä»€ä¹ˆï¼Ÿ
**A:** 
- JAR æ–¹å¼ï¼šåªéœ€è¦ JDK 17
- Docker æ–¹å¼ï¼šDocker + Docker Compose

---

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# JAR æ–¹å¼
./start.sh              # å¯åŠ¨
./stop.sh               # åœæ­¢
./restart.sh            # é‡å¯
tail -f logs/app.log    # æŸ¥çœ‹æ—¥å¿—

# Docker æ–¹å¼
./deploy.sh                 # éƒ¨ç½²
docker-compose logs -f      # æŸ¥çœ‹æ—¥å¿—
docker-compose restart      # é‡å¯
docker-compose stop         # åœæ­¢
```
